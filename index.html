<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4D Chess - Four-Dimensional Chess Game</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="js/graphics/logo_chess.png">
    
    <!-- Styles -->
    <link rel="stylesheet" href="css/main.css">
    
    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/OBJLoader.js"></script>
    <script src="js/tutorial.js"></script>
</head>
<body>
    <!-- Header Bar -->
    <header class="header-bar">
        <h1 class="title">
            <img src="js/graphics/logo_chess.png" alt="4D Chess Logo" class="header-logo">
            4D CHESS
        </h1>
        <div class="game-mode-selector">
            <button class="mode-btn active" id="mode-singleplayer" data-mode="singleplayer">
                Two Players
            </button>
            <button class="mode-btn" id="mode-vs-bot" data-mode="vs-bot">
                vs Bot
            </button>
            <button class="mode-btn" id="mode-bot-vs-bot" data-mode="bot-vs-bot">
                Watch Bots
            </button>
        </div>
        <div class="turn-indicator" id="turn-indicator">
            <span class="turn-icon" id="turn-icon">♚</span>
            <span class="turn-text" id="turn-text">White to move</span>
        </div>
        <div class="check-indicator" id="check-indicator" style="display:none;">
            <span class="check-text">⚠ CHECK!</span>
        </div>
        <div class="header-buttons">
            <button class="btn-tutorial" id="tutorial-btn">
                Tutorial
            </button>
            <button class="btn-feedback" id="feedback-btn">
                Feedback
            </button>
        </div>
    </header>

    <div class="main-container">
        <!-- Left Panel: Control Panel -->
        <aside class="control-panel">
            <!-- Game Status -->
            <section class="card status-card">
                <h3>Game Status</h3>
                <ul>
                    <li>Turn: <span id="turn-number">1</span></li>
                    <li>Player: <span id="current-player">White</span></li>
                    <li>Status: <span id="check-status">No check</span></li>
                </ul>
                
                <!-- Selected Piece Info Display -->
                <div class="piece-info-container" id="piece-info-container" style="display: none;">
                    <div class="piece-info-header">
                        <strong id="piece-info-name">-</strong>
                    </div>
                    <div class="piece-info-position">
                        <div class="position-label">Position:</div>
                        <div class="position-coords">
                            <span class="coord-item">X:<span id="piece-info-x">-</span></span>, <span class="coord-item">Y:<span id="piece-info-y">-</span></span>, <span class="coord-item">Z:<span id="piece-info-z">-</span></span>, <span class="coord-item">W:<span id="piece-info-w">-</span></span>
                        </div>
                    </div>
                    <div class="piece-info-moves-header">
                        <strong>Possible Moves:</strong>
                    </div>
                    <div class="piece-info-moves-list" id="piece-info-moves-list">
                        <!-- Moves will be populated by JavaScript -->
                    </div>
                </div>
            </section>
            
            <!-- Selected Piece Info -->
            <section class="card piece-card" id="selected-piece-info" style="display:none;">
                <h3>⌖ Selected Piece</h3>
                <ul>
                    <li>Type: <span id="piece-type"></span></li>
                    <li>Position: <span id="piece-pos"></span></li>
                    <li>Possible moves: <span id="move-count"></span></li>
                </ul>
            </section>
            
            <!-- Action Buttons -->
            <section class="card actions-card">
                <h3>Actions</h3>
                <button class="btn btn-primary btn-large" id="new-game-btn">
                    <span class="new-game-icon">⟲</span> NEW GAME
                </button>
                <div class="btn-group">
                    <button class="btn btn-secondary" id="undo-btn">
                        ↶ UNDO
                    </button>
                    <button class="btn btn-secondary" id="redo-btn">
                        ↷ REDO
                    </button>
                </div>
            </section>
            
            <!-- Statistics -->
            <section class="card stats-card">
                <h3>Statistics</h3>
                <div class="stat-row">
                    <span>White pieces:</span>
                    <span id="white-count" class="stat-value">448</span>
                </div>
                <div class="stat-row">
                    <span>Black pieces:</span>
                    <span id="black-count" class="stat-value">448</span>
                </div>
                <div class="stat-row">
                    <span>Time elapsed:</span>
                    <span id="game-time" class="stat-value">00:00</span>
                </div>
            </section>
            
            <!-- Move History -->
            <section class="card history-card">
                <h3>Move History</h3>
                <div class="move-list" id="move-history">
                    <div class="move-item">Game started...</div>
                </div>
            </section>
            
            <!-- Camera -->
            <section class="card camera-card">
                <h3>Camera</h3>
                <button class="btn btn-secondary btn-block" id="reset-camera">
                    ◎ Reset View
                </button>
                <button class="btn btn-secondary btn-block" id="top-view">
                    ↑ Top View
                </button>
                <button class="btn btn-secondary btn-block" id="side-view">
                    → Side View
                </button>
            </section>
            
            <!-- Mouse Controls -->
            <section class="card help-card">
                <h3>Mouse Controls</h3>
                <div class="shortcut-list">
                    <div class="shortcut-item">
                        <span class="key">Left Click</span>
                        <span>Rotate view</span>
                    </div>
                    <div class="shortcut-item">
                        <span class="key">Right Click</span>
                        <span>Pan (move view)</span>
                    </div>
                    <div class="shortcut-item">
                        <span class="key">Scroll</span>
                        <span>Zoom in/out</span>
                    </div>
                </div>
            </section>
            
            <!-- Keyboard Shortcuts Help -->
            <section class="card help-card">
                <h3>Keyboard</h3>
                <div class="shortcut-list">
                    <div class="shortcut-item">
                        <span class="key">R</span>
                        <span>Reset camera</span>
                    </div>
                    <div class="shortcut-item">
                        <span class="key">ESC</span>
                        <span>Deselect piece</span>
                    </div>
                </div>
            </section>
        </aside>

        <!-- Center: Game View -->
        <main class="game-view">
            <canvas id="game-canvas"></canvas>
            
            <!-- Loading Screen -->
            <div class="loading-screen" id="loading-screen">
                <div class="loading-content">
                    <div class="loading-spinner"></div>
                    <h2>Loading 4D Chess...</h2>
                    <p id="loading-text">Initializing hypercube...</p>
                </div>
            </div>
            
            <!-- Game Over Modal -->
            <div class="modal" id="game-over-modal" style="display:none;">
                <div class="modal-content">
                    <h2 id="game-over-title">Checkmate!</h2>
                    <p id="game-over-message"></p>
                    <button class="btn btn-primary" id="new-game-modal-btn">
                        ⟲ New Game
                    </button>
                </div>
            </div>
            
            <!-- Tutorial Modal -->
            <div class="tutorial-modal" id="tutorial-modal" style="display:none;">
                <div class="tutorial-modal-content">
                    <button class="tutorial-close" id="tutorial-close">×</button>
                    <div class="tutorial-nav-container">
                        <button class="tutorial-nav-arrow tutorial-nav-left" id="tutorial-nav-left">◄</button>
                        <div class="tutorial-content" id="tutorial-content">
                            <!-- Tutorial pages will be populated here -->
                        </div>
                        <button class="tutorial-nav-arrow tutorial-nav-right" id="tutorial-nav-right">►</button>
                    </div>
                    <div class="tutorial-modal-page-indicator">
                        <span id="tutorial-current-page">1</span> / <span id="tutorial-total-pages">7</span>
                    </div>
                </div>
            </div>
            
            <!-- Feedback Modal -->
            <div class="modal" id="feedback-modal" style="display:none;">
                <div class="modal-content">
                    <h2>Feedback</h2>
                    <p>We'd love to hear your thoughts about 4D Chess!</p>
                    <textarea id="feedback-text" placeholder="Share your feedback, suggestions, or report bugs..." rows="6" style="width: 100%; margin: 15px 0; padding: 10px; border: 1px solid var(--accent-primary); border-radius: 4px; background: var(--bg-tertiary); color: var(--text-primary); font-family: inherit; resize: vertical;"></textarea>
                    <div style="display: flex; gap: 10px; justify-content: flex-end;">
                        <button class="btn btn-secondary" id="feedback-cancel">Cancel</button>
                        <button class="btn btn-primary" id="feedback-submit">Submit</button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Right Panel: Navigation Panel -->
        <aside class="nav-panel">
            <section class="card nav-card">
                <h3>4D Navigation</h3>
                
                <!-- 4D Axes Gizmo -->
                <div class="gizmo-container">
                    <canvas id="axes-gizmo-canvas" width="200" height="200"></canvas>
                    <div class="gizmo-legend">
                        <div class="gizmo-legend-item"><span class="gizmo-color" style="background: #ff0000;"></span>X: Left-Right</div>
                        <div class="gizmo-legend-item"><span class="gizmo-color" style="background: #00ff00;"></span>Y: Height</div>
                        <div class="gizmo-legend-item"><span class="gizmo-color" style="background: #0000ff;"></span>Z: Depth</div>
                        <div class="gizmo-legend-item"><span class="gizmo-color" style="background: #00ffff;"></span>W: 4D Dimension</div>
                    </div>
                </div>
                
                <!-- Opacity control -->
                <div class="axis-control">
                    <label>Board Opacity</label>
                    <input type="range" id="opacity-slider" min="0" max="100" value="80" class="slider">
                    <span class="axis-value" id="opacity-value">80%</span>
                </div>
            </section>
            
            <!-- Piece Tutorial -->
            <section class="card tutorial-card">
                <h3>4D Chess Pieces</h3>
                
                <!-- Navigation -->
                <div class="tutorial-nav">
                    <button class="btn-nav-small" id="tutorial-prev">◄</button>
                    <span class="tutorial-page-indicator">
                        <span id="tutorial-page-number">1</span> / 6
                    </span>
                    <button class="btn-nav-small" id="tutorial-next">►</button>
                </div>
                
                <!-- Piece Viewer -->
                <div class="tutorial-viewer">
                    <canvas id="tutorial-piece-canvas"></canvas>
                    <div class="tutorial-controls">
                        <span class="tutorial-hint">Drag to rotate</span>
                    </div>
                </div>
                
                <!-- Piece Name -->
                <h4 id="tutorial-piece-name" class="tutorial-piece-name">Rook</h4>
                
                <!-- Movement Description -->
                <div class="tutorial-description" id="tutorial-description">
                    <!-- Content will be populated by JavaScript -->
                </div>
                
                <!-- Movement Examples -->
                <div class="tutorial-examples" id="tutorial-examples">
                    <!-- Examples will be populated by JavaScript -->
                </div>
            </section>
        </aside>
    </div>

    <!-- Scripts -->
    <!-- Piece classes (must load before GameBoard) -->
    <script src="js/pieces/Piece.js?v=3"></script>
    <script src="js/pieces/Pawn.js?v=3"></script>
    <script src="js/pieces/Rook.js?v=3"></script>
    <script src="js/pieces/Bishop.js?v=3"></script>
    <script src="js/pieces/Knight.js?v=3"></script>
    <script src="js/pieces/Queen.js?v=3"></script>
    <script src="js/pieces/King.js?v=3"></script>
    
    <!-- Game logic -->
    <script src="GameBoard.js?v=5"></script>
    <script src="MoveManager.js?v=3"></script>
    <script src="Models.js?v=5"></script>
    
    <!-- Animation system -->
    <script src="js/Animation.js"></script>
    
    <!-- Piece movement handler -->
    <script src="js/PieceMovement.js"></script>
    
    <!-- Bot AI -->
    <script src="js/Bot.js"></script>
    
    <!-- Comprehensive Tutorial System -->
    <script src="js/comprehensiveTutorial.js"></script>
    
    <!-- Main application -->
    <script src="js/main.js?v=2"></script>
</body>
</html>

